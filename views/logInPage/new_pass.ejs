<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Set New Password</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex items-center justify-center min-h-screen bg-gray-100">
  <div class="bg-white shadow-lg rounded-lg p-6 w-full max-w-sm">
    <h2 class="text-xl font-bold mb-4 text-center text-[#0d3b66]">Set New Password</h2>

    <% if (error) { %>
      <p class="text-red-600 text-sm mb-3"><%= error %></p>
    <% } %>

    <form id="passwordForm" method="POST" action="/update-password" novalidate>
      <!-- hidden email -->
      <input type="hidden" name="email" value="<%= email %>"/>

      <label class="block text-sm font-medium mb-1">New Password</label>
      <input type="password" id="pass" name="pass"
        class="w-full border rounded-md px-3 py-2 mb-2 focus:ring-2 focus:ring-[#0066f5]"/>

      <label class="block text-sm font-medium mb-1">Confirm Password</label>
      <input type="password" id="conpass" name="conpass"
        class="w-full border rounded-md px-3 py-2 mb-2 focus:ring-2 focus:ring-[#0066f5]"/>

      <p id="errorMsg" class="text-red-600 text-sm mb-3 hidden"></p>

      <button type="submit"
        class="w-full bg-[#0066f5] text-white py-2 rounded-md hover:bg-[#004bb5]">
        Update Password
      </button>
    </form>
  </div>

  <script>
    document.getElementById("passwordForm").addEventListener("submit", function(e) {
      const pass = document.getElementById("pass").value.trim();
      const conpass = document.getElementById("conpass").value.trim();
      const errorMsg = document.getElementById("errorMsg");

      if (pass === "" || conpass === "") {
        e.preventDefault();
        errorMsg.textContent = "Password fields cannot be empty.";
        errorMsg.classList.remove("hidden");
        return;
      }

      if (pass.length < 6) {
        e.preventDefault();
        errorMsg.textContent = "Password must be at least 6 characters long.";
        errorMsg.classList.remove("hidden");
        return;
      }

      if (pass !== conpass) {
        e.preventDefault();
        errorMsg.textContent = "Passwords do not match.";
        errorMsg.classList.remove("hidden");
        return;
      }

      // agar sab sahi hai
      errorMsg.classList.add("hidden");
    });
  </script>
</body>
</html>
